# Конвейеры
## 1
Конвейер для мониторинга активных процессов в системе. Результаты отсортированы по использованию ресурсов.
```shell
ps -exo pid,ppid,user,pcpu,pmem,comm,time |
  grep -v grep |
  sort -k4,4 -k5,5 -rn |
  awk '{print $1, $2, $3, $4, $5, $6}' >~/system_monitoring.txt

```
## 2
Конвейер, который сравнивает содержимое двух директорий.  
{dir_1} - путь до первой директории  
{dir_2} - путь до второй директории 
```shell
diff <(find {dir_1} -type f | sort) <(find {dir_2} -type f | sort) >~/directory_comparison.txt

```
## 3
Конвейер для подсчета общего числа строк во всех текстовых файлах в указанной директории  
{dir_path} - путь до директории
```shell
find {dir_path} -type f -name "*.txt" -o -name "*.md" -o -name "*.html" |
  xargs wc -l

```
## 4
Конвейер для мониторинга использования дискового пространства
```shell
df -h |
  sort -k6,6 -k7,7 -rh |
  awk '{print $1, $2, $3, $8}'

```
## 5
Конвейер для фильтрации строк с ключевым словом в лог-файлах, сортировки и архивации результатов.
{dir_path} - путь до директории с логами  
{key} - ключевое слово для фильтрации
```shell
cat {dir_path}/*.log |
  grep -v {key} |
  awk '{print $0}' |
  sort >summary.log && tar -cvf archive.tar summary.log

```
# Скрипты
## 1
Скрипт, проверяющий доступность нескольких хостов сети.  
Скрипт последовательно проверяет каждый хост на доступность с использованием команды ping.  
Если хост доступен, выводит сообщение «Хост [ИМЯ ХОСТА] доступен»,
если нет — выведите сообщение «Хост [ИМЯ ХОСТА] недоступен».  
В конце скрипта выводит общее количество доступных и недоступных хостов.
```shell
# Список хостов для проверки
declare -a hosts_array=("127.0.0.1" "0.0.0.0" "www.example.com" "www.google.com" "www.yandex.ru")

# Счетчики доступных и недоступных хостов
available_count=0
unavailable_count=0

# Проверяем каждый хост
for host in "${hosts_array[@]}"; do
  # Проверяем доступность хоста с помощью команды ping
  if ping -c 1 "$host" &>/dev/null; then
    echo "Хост $host доступен"
    ((AVAILABLE_COUNT++))
  else
    echo "Хост $hosr недоступен"
    ((UNAVAILABLE_COUNT++))
  fi
done

# Выводим общее количество доступных и недоступных хостов
echo "Доступно $available_count хостов"
echo "Недоступно $unavailable_count хостов"

```
## 2
Скрипт для анализа лог-файлов в указанной директории.  
Скрипт находит все файлы с расширением «.log» в указанной директории и подсчитывает количество строк,
содержащих определенное ключевое слово. Ключевое слово задано в переменной в начале скрипта.  
Скрипт выводит сообщение в формате:
«Файл [ИМЯ ФАЙЛА] содержит [КОЛИЧЕСТВО СТРОК С КЛЮЧЕВЫМ СЛОВОМ] строк с ключевым словом [КЛЮЧЕВОЕ СЛОВО]».  
В конце скрипта выводится общее количество строк с ключевым словом по всем лог-файлам в данной директории.
```shell
# Ключевое слово
keyword="ERROR"

# Подсчет строк с ключевым словом
total_count=0

# Пусть до директории
directory=(~/*.log)

# Проходим по всем файлам в директории
for file in $directory; do
  # Проверка, что является файлом
  if [ -f "$file" ]; then
    # Подсчет строк с ключевым словом в каждом файле
    count=$(grep -c "$keyword" "$file")

    # Выводим сообщение для каждого файла
    echo "Файл $file содержит $count строк с ключевым словом $keyword"

    # Добавляем количество строк с ключевым словом в общий счетчик
    total_count=$((total_count + count))
  else
    echo "$file не является файлом"
  fi
done

# Выводим общее количество строк с ключевым словом по всем файлам
echo "Общее количество строк с ключевым словом $keyword по всем лог-файлам в данной директории: $total_count"

```